<!DOCTYPE html>
<meta charset='utf-8'>
<title>Map: Site Title</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.1/dist/leaflet.css" />
<link href="https://fonts.googleapis.com/css?family=Libre+Baskerville" rel="stylesheet">
<link rel="stylesheet" href="styles.css">

<script src="https://unpkg.com/leaflet@1.0.1/dist/leaflet.js"></script>
<script src="locations.js"></script>

<header>
  <h1>Mapping Jorge Luis Borges in the Argentine Publishing Industry (1930-1951)</h1>
  <nav>
    <a href="index.html">Home</a>
    <a href="map.html">Map</a>
    <a href="descriptivebibliography.html">Descriptive Bibliography</a>
  </nav>
</header>
<main>

<div id="map"></div>
<div id="location-metadata"></div>

</main>

<script>

function onEachFeature(feature, layer) {
  console.log(feature);
  var popupContent = '';
    if (feature.properties) {

      if (feature.properties.name) {
        popupContent += '<h2>' + feature.properties.name + '</h2>';
      }

      if (feature.properties.images) {

        feature.properties.images.forEach(function(image) {
          popupContent += '<img src="images/'+image+'">';
        });

      }
      layer.bindPopup(popupContent);
    }
}

var mymap = L.map('map').setView([-34.6065302, -58.43062439999999], 12);

L.tileLayer('https://api.mapbox.com/styles/v1/norabenedict/ciuygz63a00go2io45drad3w0/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoibm9yYWJlbmVkaWN0IiwiYSI6ImNpdXllbjdkbzA0aHYyeWwxd3BoaDdrYzgifQ.F94DF9486D8vAprIkZSOnQ', {
    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
    maxZoom: 18
}).addTo(mymap);

L.geoJSON(locations,{
    onEachFeature: onEachFeature
}).addTo(mymap).on('click', function(e) {

  var content = document.createElement('div');
  var booksheading = document.createElement('h2');
  var booksheadingtext = document.createTextNode('Books');
  booksheading.appendChild(booksheadingtext);
  content.appendChild(booksheading);

  var content = document.createElement('div');
  var historyheading = document.createElement('h2');
  var historyheadingtext = document.createTextNode('History');
  historyheading.appendChild(historyheadingtext);
  content.appendChild(historyheading);


  metadata_container = document.getElementById('location-metadata');
  metadata_container.appendChild(content);

  console.log(e);
});
</script>
